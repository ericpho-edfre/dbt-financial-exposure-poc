version: 2

models:
  - name: stg_project_tracker
    description: >
      Deduplicated and cleaned view of project tracker data from the raw data. 
      Filters out null load dates, converts "NULL" strings to actual nulls, 
      performs type coercion, and retains the most recent row per project.
    columns:
      - name: PROJECT_ID
        description: Unique identifier for the project.

      - name: PROJECT_NAME
        description: Name of the project.

      - name: LATITUDE
        description: Latitude coordinate of the project location.

      - name: LONGITUDE
        description: Longitude coordinate of the project location.

      - name: IS_PROJECT_EDF_OWNED
        description: Indicates whether the project is owned by EDF (true/false).

      - name: DEVELOPMENT_REGION
        description: Geographic region where the project is being developed.

      - name: CURRENT_PROJECT_STATUS
        description: Current status of the project (e.g., active, completed, planned).

      - name: TECHNOLOGY_CATEGORY
        description: Technology type used in the project (e.g., solar, wind).

      - name: CONTRACTEDCAPACITYMWDC
        description: Contracted capacity in megawatts (direct current).

      - name: CONTRACTEDCAPACITYMWAC
        description: Contracted capacity in megawatts (alternating current).

      - name: POICAPACITYMWAC
        description: Point-of-interconnection capacity in megawatts (alternating current).

      - name: COD_DATE
        description: Commercial Operation Date of the project.

      - name: EARLIEST_COD_DATE
        description: Earliest expected Commercial Operation Date.

      - name: LOAD_DATE
        description: Date when the record was loaded into the raw layer.
  - name: stg_sap_project
    description: >
      Bronze layer view of SAP project data with basic cleansing and deduplication.
      Columns renaming performed based on https://leanx.eu/en/sap/table/proj.html
      Deduplication performed based on LOAD_DATE      
    columns:
      - name: client_id
        description: "SAP client identifier (renamed from MANDT)"
        data_type: varchar      
      - name: project_definition_internal
        description: "Internal project definition number (WBS element)"
        data_type: varchar        
      - name: project_definition
        description: "External project definition identifier"
        data_type: varchar
      - name: project_short_definition_line1
        description: "Short description of the project (first line)"
        data_type: varchar
      - name: LOAD_DATE
        description: "Timestamp when record was loaded into raw layer"
        data_type: timestamp