snapshots:
  - name: project_tracker_snapshot
    description: |
      Historical snapshot of EDF renewable energy project tracking data using slowly changing dimension (SCD) Type 2 strategy.
      
      This snapshot captures changes to project attributes over time, enabling historical analysis of project development 
      progression, capacity changes, and status updates. The snapshot is triggered by changes to any of the specified 
      check columns and maintains a complete audit trail of project data modifications.
      
      **Snapshot Configuration:**
      - Strategy: Check columns (detects changes in specified fields)
      - Unique Key: PROJECT_ID
      - Refresh Schedule: [Add your refresh schedule here]
      - Retention Policy: [Add your retention policy here]
      
    columns:
      - name: project_id
        description: "Unique identifier for each renewable energy project. Primary business key for tracking projects across systems."
        tests:
          - not_null
          - unique
          
      - name: project_name
        description: "Human-readable name of the renewable energy project"
        tests:
          - not_null
          
      - name: latitude
        description: "Geographic latitude coordinate of the project location in decimal degrees"
        tests:
          - not_null
          
      - name: longitude
        description: "Geographic longitude coordinate of the project location in decimal degrees"
        tests:
          - not_null
          
      - name: is_project_edf_owned
        description: "Boolean flag indicating whether the project is owned by EDF (TRUE) or by a third party (FALSE)"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              
      - name: development_region
        description: "Geographic region where the project is being developed (e.g., North America, Europe, Asia-Pacific)"
        tests:
          - not_null
          
      - name: current_project_status
        description: |
          Current stage of project development lifecycle. Common values include:
          - Development: Early planning and permitting phase
          - Construction: Active construction phase
          - Operational: Project is generating power
          - Decommissioned: Project has been retired
        tests:
          - not_null
          
      - name: technology_category
        description: |
          Type of renewable energy technology used in the project:
          - Solar: Solar photovoltaic systems
          - Wind: Wind turbine installations
          - Storage: Battery energy storage systems
          - Hybrid: Combination of multiple technologies
        tests:
          - not_null
          
      - name: contractedcapacitymwdc
        description: "Contracted capacity of the project in megawatts direct current (MW DC), representing the maximum DC power output"
        
      - name: contractedcapacitymwac
        description: "Contracted capacity of the project in megawatts alternating current (MW AC), representing the maximum AC power output to the grid"
        
      - name: poicapacitymwac
        description: "Point of Interconnection (POI) capacity in megawatts alternating current (MW AC), representing the maximum power that can be delivered to the grid connection point"
        
      - name: cod_date
        description: "Commercial Operation Date (COD) - the date when the project is expected to begin commercial operation and power generation"
        
      - name: earliest_cod_date
        description: "Earliest possible Commercial Operation Date, representing the most optimistic timeline for project completion"
        
      - name: load_datetime
        description: "Timestamp when this record was loaded into the bronze layer, used for data lineage and debugging"
        tests:
          - not_null
          
      # dbt Snapshot Metadata Columns
      - name: dbt_scd_id
        description: "Unique identifier for each snapshot record, automatically generated by dbt"
        tests:
          - not_null
          - unique
          
      - name: dbt_updated_at
        description: "Timestamp when this snapshot record was created or last updated by dbt"
        tests:
          - not_null
          
      - name: dbt_valid_from
        description: "Timestamp when this version of the record became active/valid"
        tests:
          - not_null
          
      - name: dbt_valid_to
        description: "Timestamp when this version of the record became inactive/invalid. NULL for current active records"